#!/usr/bin/env -S ruby -Eutf-8

require "bundler/setup"
require_relative "../lib/lifer"

arg = ARGV[0]

if ["-h", "--help", "help"].include?(arg)
  puts <<~HELP_TEXT
    Lifer, the static site generator

    Usage:
      lifer [subcommand]

    Subcommands:
      build: Build the Lifer project as configured in your Lifer configuration file.
      serve: Run a Lifer development server.
  HELP_TEXT
end

if arg == "serve"
  Lifer.build!

  require "lifer/dev/server"

  Lifer::Dev::Server.start!
end

if arg.nil? || arg == "build"
  Lifer.build!
end
